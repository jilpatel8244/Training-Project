<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>student-info</title>
    <link rel="stylesheet" href="/css/task12.multipleSearch.css">
</head>

<body>
    <section>
        <div class="container" >



            <div class="row1">
                <h1>Jil Patel</h1>
                <h1>Student Info</h1>
                <%- include('../partials/task12.paginationComponent.ejs', {current_page: current_page}) %>
            </div>





            <div class="row2">
                <form action="/app/v1/getStudentInfo" method="post" id="frm">
                    <input type="text" name="id" id="id" placeholder="Enter student id here" value="<%= body.id %>" required autofocus>
                    <input type="submit" value="Go" class="btn" >
                </form>

                <form action="/app/v1/getStudentInfo" method="post" id="frm1" style="display: none;">
                    <input type="text" name="first_name" id="first_name" placeholder="first_name"  value="<%= body.first_name %>">
                    <input type="text" name="last_name" id="last_name" placeholder="last_name"  value="<%= body.last_name %>">
                    <input type="text" name="city" id="city" placeholder="city" value="<%= body.city %>">
                    <input type="text" name="country" id="country" placeholder="country" value="<%= body.country %>">
                    <input type="date" name="dob" id="dob" value="<%= body.dob %>">
                    <div class="slider">
                        <label for="current_cgpa">choose cgpa range from 0 to 10</label>
                        <input type="range" id="current_cgpa" name="current_cgpa" min="0" max="10" value="<%= body.current_cgpa %>" oninput="rangeValue.innerText = this.value">
                        <p id="rangeValue" style="margin: 0;"><%= body.current_cgpa %></p>   
                    </div>   
                    <label for="gender">gender</label>
                    <select name="gender" id="gender">
                        <option value="'male', 'female'">both</option>
                        <option value="'male'">male</option>
                        <option value="'female'">female</option>
                    </select>
                    <label for="operator">operator</label>
                    <select name="operator" id="operator" value="<%= body.operator %>">
                        <option value="and">and</option>
                        <!-- <option value="or">or</option> -->
                    </select>
                    <input type="submit" value="Go" class="btn" >
                </form>

                <span id="view" onclick="clickHandler()">view more...</span>
            </div>







            <div class="row3">
                <% if(!found) {%>
                    <p style="color: red;">data not found</p>
                <% } else { %>
                    <table>
                        <tr>
                            <th>id</th>
                            <th>first name</th>
                            <th>last name</th>
                            <th>email</th>
                            <th>gender</th>
                            <th>dob</th>
                            <th>city</th>
                            <th>country</th>
                            <th>current_cgpa</th>
                            <th>created_at</th>
                        </tr>
                        <% data.forEach(singleStudentData=> { %>
                            <tr>
                                <td>
                                    <%= singleStudentData.s_id %>
                                </td>
                                <td>
                                    <%= singleStudentData.first_name %>
                                </td>
                                <td>
                                    <%= singleStudentData.last_name %>
                                </td>
                                <td>
                                    <%= singleStudentData.email %>
                                </td>
                                <td>
                                    <%= singleStudentData.gender %>
                                </td>
                                <td>
                                    <%= (singleStudentData.dob).toDateString() %>
                                </td>
                                <td>
                                    <%= singleStudentData.city %>
                                </td>
                                <td>
                                    <%= singleStudentData.country %>
                                </td>
                                <td>
                                    <%= singleStudentData.current_cgpa %>
                                </td>
                                <td>
                                    <%= (singleStudentData.created_at).toLocaleString() %>
                                </td>
                            </tr>
                            <% }) %>
                    </table>
                <% } %>
                
            </div>
        </div>
    </section>

</body>
<% if( body.first_name != undefined ||  body.last_name != undefined || body.city != undefined || body.country != undefined ){ %>
    <script>
        document.getElementById('frm')[0].disabled = true;
        document.getElementById('frm')[1].disabled = true;
        document.getElementById('frm')[1].style.opacity = 0.5;

        document.getElementById('frm1').style.display = "inline";
        document.getElementById('view').innerHTML = "view less..."
    </script>
<% } %>
<script>
    
    
    function clickHandler() {
        if (document.getElementById('view').innerHTML == "view more...") {
            // document.getElementById('frm').style.display = "none";
            document.getElementById('frm')[0].disabled = true;
            document.getElementById('frm')[1].disabled = true;
            document.getElementById('frm')[1].style.opacity = 0.5;

            document.getElementById('frm1').style.display = "inline";
            document.getElementById('view').innerHTML = "view less..."

        }else{
            document.getElementById('frm')[0].disabled = false;
            document.getElementById('frm')[1].disabled = false;
            document.getElementById('frm')[1].style.opacity = 1;

            document.getElementById('frm1').style.display = "none";
            document.getElementById('view').innerHTML = "view more..."

            document.getElementById('frm1')[0].focus();

        }

    }
</script>

</html>